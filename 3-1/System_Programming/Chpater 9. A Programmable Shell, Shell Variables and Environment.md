
# 쉘

- 유닉스/리눅스 쉘은 하나의 프로그래밍 언어이다.

---
# 쉘 프로그래밍

- 쉘은 프로그램을 실행하며 동시에 인터프리터 역할을 한다.
- 키보드 입력 또는 스크립트 파일을 통해 명령을 해석한다.
- 복잡한 작업을 여러 프로그램의 조합으로 해결할 수 있다.
- 쉘은 다른 프로그램을 조작하거나 통신을 제공한다.

---
# 쉘 스크립트

- 명령의 집합을 파일로 저장한 것.
    
- `chmod +x script.sh` 또는 실행 권한을 부여하여 실행.
    
- 예: 주석 → 명령 순차 실행 → `exit` 시 종료.

### 4. 셸 프로그래밍 기능

#### 변수

- 대소문자 구분 없음.
    
- `$변수명` 으로 접근.

#### 사용자 입력

- `read` 명령으로 사용자 입력 받기 가능.

#### 제어문

- `if`, `while`, `case`, `for` 문 지원.
- `if` 는 `fi` 로 닫아야함.

#### 환경변수

- 예: `HOME`, `PATH` 등 사용자 설정 저장.

### 5. 명령행 파싱

- 문자열을 구분자 기준으로 토큰으로 분리 (`strtok`)
    
- 파서: 입력을 받아 토큰화하고 구문 분석함.

```c
char phrase[] = "the music made it hard to concentrate"; 
char *token = strtok(phrase, “ “); 

while (token != NULL) { 
	printf("%s\n", token); 
	token = strtok(NULL, delim); 
}
```

### 6. 셸에서의 제어 흐름

- `if <command>; then ...; else ...; fi` 구조 지원.
    
- `exit status = 0`이면 참으로 간주, 아니면 거짓.
    
- 스크립트 해석 시 상태에 따라 블록 실행됨.

### 7. 변수 시스템

- 로컬 변수: 현재 셸에만 유효.
    
- 환경 변수: 자식 프로세스에 상속됨.
    
- `set`, `export` 명령으로 설정.

### 8. 환경 변수

- 설정 확인: `env`
    
- 설정 추가: `export VAR=value`
    
- C에서 접근: `getenv("VAR")`, `extern char **environ`

### 9. 입출력 리다이렉션

- 표준 입출력 스트림
    
    - `stdin` (0), `stdout` (1), `stderr` (2)
    
- 리다이렉션 방법
    
    - `<`, `>` 연산자
        
    - stdin 재지정 하는 방법
	    1. close(0) 하고 open("file",O_RDONLY);
		2. dup2() 함수로 복사하고 close(fd)
    
- 예: `who > userlist`
    
    - `fork()` 후 자식 프로세스에서 `stdout`을 파일에 연결하고 `exec()` 실행

### 10. 요약

- 셸은 프로그램 실행, 변수 사용, 조건 논리 수행이 가능.
    
- 환경 변수는 전역 설정을 자식 프로세스에 전달함.
    
- 입출력 리다이렉션은 파일 디스크립터를 이용하여 처리되며, `exec` 이후에도 유지됨.